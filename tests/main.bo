library "base.bo";

import "aoc/day1.bo";
// import "aoc/day2.bo";
import "aoc/day3.bo";
import "aoc/day4.bo";
import "aoc/day5.bo";

const DO_AOC = true;

const ok = fn(name: []r u8) {
    print("[OK] ");
    print(name);
    print("\n");
};

const TestBasic = {
    defer ok("TestBasic");

    let a = 99;
    let a_ptr = &a;
    let b = 42;

    a = b;

    a : u32;
    
    assert(a == b);

    *a_ptr = 2;

    assert(a >= 2);
};

const TestBlocksAndBreaks = {
    defer ok("TestBlocksAndBreaks");

    let set_order = fn(order: &u32, wanted: u32) {
        assert(*order == wanted);
        *order = *order + 1;
    };

    let i = 0;

    {
        defer set_order(&i, 4);
        defer set_order(&i, 3);

        let a = { 'name
            defer set_order(&i, 2);
            defer set_order(&i, 1);

            let b = 4;

            {
                defer set_order(&i, 0);
                break 'name 3 : u64;
            };

            defer assert(false);

            b
        };

        assert(a == 3);

    };
};
