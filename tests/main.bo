library "base.bo";

import "aoc/day1.bo";
import "aoc/day2.bo";
import "aoc/day3.bo";
import "aoc/day4.bo";
import "aoc/day5.bo";
import "aoc/day6.bo";
import "aoc/day7.bo";

const run_aoc_tests = fn() {
    TestsDay1();
    TestsDay2();
    TestsDay3();
    TestsDay4();
    TestsDay5();
    TestsDay6();
    TestsDay7();
};

const ok = fn(name: []r u8) {
    print("[OK] ");
    print(name);
    print("\n");
};

{
    defer ok("TestBasic");

    let a = 99;
    let a_ptr = &a;
    let b = 42;

    a = b;

    a : u32;
    
    assert(a == b);

    *a_ptr = 2;

    assert(a >= 2);
};

{
    defer ok("TestBlocksAndBreaks");

    let set_order = fn(order: &u32, wanted: u32) {
        assert(*order == wanted);
        *order = *order + 1;
    };

    let i = 0;

    {
        defer set_order(&i, 4);
        defer set_order(&i, 3);

        let a = { 'name
            defer set_order(&i, 2);
            defer set_order(&i, 1);

            let b = 4;

            {
                defer set_order(&i, 0);
                break 'name 3 : u64;
            };

            defer assert(false);

            b
        };

        assert(a == 3);

    };
};

/* Doesn't work right now!
{
    defer ok("TestSomething");

    let value = (fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(fn(x) x)(99) : u64;

    assert(value == 99);
};
*/
