const print_u8  = extern "borkle_lib/hello" "print_u8"  : extern fn (u8) -> u8;
const callback  = extern "borkle_lib/hello" "callback"  : extern fn () -> extern fn (i64) -> i64;

const alloc = extern "borkle_lib/hello" "alloc" : extern fn (usize) -> &();
const dealloc = extern "borkle_lib/hello" "dealloc" : extern fn (&(), usize);

const print_i64 = extern "borkle_lib/hello" "print_i64" : extern fn (i64) -> i64;

const if = fn(option: u64, one: fn(), zero: fn()) -> fn() {
    bit_cast (bit_cast zero - (bit_cast zero * option) + (bit_cast one * option) : u64)
};

const main = {
    if(
        1,
        fn() { if(1, fn () { print_i64(2); }, fn() { print_i64(1); })(); },
        fn() { print_i64(0); },
    )();
};
