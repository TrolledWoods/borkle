const MESSAGE = "Hello One Lone Coders!\n";

const testing_constant = {
    let constant = uninit : [3] [] u8;
    *(bit_cast (bit_cast &constant + 0 : u64) : &[]u8) = "One!\n";
    *(bit_cast (bit_cast &constant + 16 : u64) : &[]u8) = "Two!\n";
    *(bit_cast (bit_cast &constant + 32 : u64) : &[]u8) = "Three!\n";
    constant
};

const main = fn() -> u64 {
    print(*(bit_cast &testing_constant));
    print(*(bit_cast (bit_cast &testing_constant + 16 : u64)));
    print(MESSAGE);
    0
};

const tmep = get_num;
const get_num = fn() -> i64 { 90 + 40 };

const print = fn (buffer: [] u8) -> u64 {
    (extern "borkle_lib/hello" "put_string" : extern fn(&u8, usize) -> u64)
        (buffer.ptr, buffer.len)
};

const print_i64 = extern "borkle_lib/hello" "print_i64" : extern fn (i64) -> i64;

// const print_i64 = fn (num: i64) -> i64 {
//     (extern "borkle_lib/hello" "print_i64" : extern fn (i64) -> i64)(num)
// };

// const alloc = fn (len: usize) -> [] u8 {
//     let buf = uninit : [] u8;
//     buf.ptr = (extern "borkle_lib/hello" "alloc" : extern fn (usize) -> &u8)(len);
//     buf.len = len;
//     buf
// };
// 
// const dealloc = fn (buf: [] u8) {
//     (extern "borkle_lib/hello" "dealloc" : extern fn (&u8, usize))(buf.ptr, buf.len);
// };
// 
// const get = fn (array: &[4] &i64, index: usize) -> &&i64 {
//     let first = bit_cast array : &i64;
//     bit_cast ((index * 8) + bit_cast first)
// };

// const flush = extern "borkle_lib/hello" "flush_stdout" : extern fn();
// 
// const print_u8  = extern "borkle_lib/hello" "print_u8"  : extern fn (u8) -> u8;
// const callback  = extern "borkle_lib/hello" "callback"  : extern fn () -> extern fn (i64) -> i64;

